import { useRef, useState } from "react";
import { ArgsTable, Meta, Story, Canvas } from "@storybook/addon-docs";
import { Link, SaltProvider, Text } from "@salt-ds/core";
import { TabPanelNext, TabsNext, TabNext, TabstripNext } from "@salt-ds/lab";
import {
  CharacteristicUsage,
  CSSClassTable,
} from "css-variable-docgen-components";
import HelpAndSupport from "docs/blocks/help-and-support.doc.mdx";

<Meta title="Documentation/Lab/Tabs Next" />

# Tabs

Tabs allow the user to switch between different views or sub-pages within the same context. Each tab displays different content. Tabs are grouped in a Tabstrip and can switch the visible content when clicked.

## How to use

In its simplest form, wrap your content in TabPanelNext and give it a label. Then, wrap the panels with TabsNext.

```jsx
<TabsNext>
  <TabPanelNext label="Home">
    <Text>Content for Home tab</Text>
  </TabPanelNext>
  <TabPanelNext label="Transactions">
    <Text>Content for Transactions tab</Text>
  </TabPanelNext>
  <TabPanelNext label="Loans">
    <Text>Content for Loans tab</Text>
  </TabPanelNext>
  <TabPanelNext label="Checks">
    <Text>Content for Checks tab</Text>
  </TabPanelNext>
  <TabPanelNext label="Liquidity">
    <Text>Liquidity</Text>
  </TabPanelNext>
</TabsNext>
```

##### Use when

- You want to organize related content in a consolidated and clear format.
- You have a large amount of content that can be divided into distinct categories.

##### Don't use when

If your content isn't logically grouped into separate categories or if there are too many categories. In this case, an alternative navigation method may be more appropriate.

## Features

Tabs can be aligned to the left or centered within the Tabstrip. If not specified, the default alignment is left.

<Canvas>
  <Story id="lab-tabs-next-tabs-next--default" />
</Canvas>

### Centered Tabs

Tabs can be center-aligned within the Tabstrip.

<Canvas>
  <Story id="lab-tabs-next-tabs-next--centered" />
</Canvas>

### Default Selected Tab Index

A default tab can be selected by providing a `defaultSelectedTabIndex` prop.

<Canvas>
  <Story id="lab-tabs-next-tabs-next--default-selected-tab-index" />
</Canvas>

### Secondary Tabs

Not a feature of the Tabs directly, however, the design of the tabs allows you to wrap them in a container with a background color. You can achieve the "secondary" variant by wrapping the Tabs in a container with a background color `--salt-container-secondary-background` for example.

<Canvas>
  <Story id="lab-tabs-next-tabs-next--with-secondary-container" />
</Canvas>

### Tabs with Overflow Menu

By default, if tabs exceed the width of the Tabstrip, they are gathered into an overflow menu.

#### Label considerations

In order for overflow menu to work properly it needs a stable id for each Tab. To cater for that requirement Tabs automatically construct an id for each tab by using its label. We assume the label will be unique for each tab. If you require tabs with identical labels, make sure to pass a unique id to each tab.

#### Design considerations

- Tabs should be arranged logically and predictably.
- If the tabs exceed the Tabstrip width, the Overflow Menu provides an effective way of managing additional tabs.
- Selecting a tab item in the Overflow Menu activates it and moves it to the last visible slot in the Tabstrip. This way, the user always knows their position within the application.
- This change in tab ordering is temporary. When the tab is no longer selected, it returns to its original position in the Overflow Menu. The tab order is always maintained.

<Canvas>
  <Story id="lab-tabs-next-tabs-next--lots-of-tabs" />
</Canvas>

### Controlled Tabs

Tabs can be controlled to customize behavior, perform validation or additional actions on click, as well as programmatically activate a tab.

The state can be controlled by the application and not internally within the tabs component. There is no visual change to Tabs.

<Canvas>
  <Story id="lab-tabs-next-tabs-next--controlled" />
</Canvas>

## Configuring Tabs

### API

`import { TabsNext, TabPanelNext, TabstripNext } from "@salt-ds/lab";`

### Props

<ArgsTable of={TabsNext} />

### Classes

<CSSClassTable of={TabstripNext} />

<CSSClassTable of={TabNext} />

### Characteristics used

#### TabstripNext

<CharacteristicUsage of={TabstripNext} />

#### TabNext

<CharacteristicUsage of={TabNext} />

## Accessibility

The Tab component is accessible and keyboard-navigable, conforming to the WAI-ARIA roles and properties for the tab component.

- Each tab has a role of 'tab' and the tab list has a role of 'tablist'.
- The active tab has a tabIndex of 0 and all other tabs have a tabIndex of -1, making the active tab the only tab in the natural tab order.
- Arrow key navigation (left and right) is supported within the Tabstrip.
- Pressing the Enter or Space keys will switch to the selected tab.

### TabPanel

TabPanel by default has `tabIndex` set to 0 so it is focusable by using the Tab key. This should only be the case when the TabPanel content is not focusable. If you have focusable content inside the TabPanel, you should set `tabIndex` to -1.

<HelpAndSupport />

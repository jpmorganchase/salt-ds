import { FormField } from "@salt-ds/core";
import { Meta, Canvas, ArgsTable, Story } from "@storybook/addon-docs";
import {
  CSSClassTable,
  CharacteristicUsage,
} from "css-variable-docgen-components";
import HelpAndSupport from "docs/blocks/help-and-support.doc.mdx";

<Meta
  title="Documentation/Core/Form Field"
  component={FormField}
  parameters={{
    viewMode: "docs",
  }}
/>

# Form Field

Form Field is a wrapper for UI controls that are typically found in a form (for example, Input, Combobox or Radio Button). It is required to make these controls accessible by providing them with a visible label, validation control and states and descriptive text elements.

<Canvas>
  <Story id="core-form-field--default" />
</Canvas>

# Examples

All examples demonstrate Salt form controls inside the Form Field, including Input, Checkbox and Radio Button. These components are available as part of the Salt component library in addition to Form Field.

## Form Controls

Form field can wrap any Salt UI control that is typically found in a form, such as Input, Multiline Input, Checkbox and Radio Button components.

<Canvas>
  <Story id="core-form-field--with-controls" />
</Canvas>

When using Form Field with Multiline Input, the `intent` prop can be set to "sentence" on the Form Field Label and the `bordered` prop can be set on Multiline Input to style the field as a question.

<Canvas>
  <Story id="core-form-field--with-multiline-input-as-question" />
</Canvas>

## Form Field Label

Form Field provides a visible label which should be used to describe the form control in the field. The label is placed above the form control by default.

Display the label via the `FormFieldLabel` component.

<Canvas>
  <Story id="core-form-field--skeleton" />
</Canvas>

### Guidance

- The label should be easy to scan and be no more than 3 words long.
- Use the label to describe the information/data the field is collecting (e.g., Name, Location, Currency).
- Use `FormFieldHelperText` to provide additional information and context to help the user complete the field. See the ‘Helper Text’ section below.

## Left Form Field Label Placement

The Form Field Label can be positioned to the left of the form control via the prop `labelPlacement`.

<Canvas>
  <Story id="core-form-field--label-left" />
</Canvas>

### Guidance

Place your label to the left of the control if your application is limited in vertical real estate or if you have a very data heavy, dense form, where it’s preferable to have as many fields visible as possible without scrolling.

## Form Field Label Question

The Form Field Label can be emphasized by setting the `intent` prop to `sentence`.

<Canvas>
  <Story id="core-form-field--label-question" />
</Canvas>

### Guidance

- When paired with Multiline Input, pair the "sentence" label with a full border.

## Form Field Helper Text

Form Field can display Helper Text using the `FormFieldHelperText` component.

<Canvas>
  <Story id="core-form-field--helper-text" />
</Canvas>

If you are low on screen real-estate, opt for using a [Tooltip](/?path=/docs/documentation-core-tooltip--docs) to display your helper text.

<Canvas>
  <Story id="core-form-field--helper-text-as-tooltip" />
</Canvas>

### Guidance

- Use Form Field Helper Text to provide additional guidance to users, such as an instruction (when it’s not obvious what action the user must take), or if you need to show an example of acceptable formats to increase the likelihood of successful entry.
- Keep your Form Field Label short by moving guidance to the Helper Text.

## Disabled

Form Field can be disabled via the prop `disabled`.

<Canvas>
  <Story id="core-form-field--disabled" />
</Canvas>

### Guidance

- The prop should be applied to the field, not the control it contains, for expected results.
- Fields are typically disabled if the context or required permissions prevent the user from interacting with a field.
- Dsabled fields do not need to meet WCAG text contrast requirements.

## Readonly

Form Field can be set as read-only via the prop `readOnly`.

<Canvas>
  <Story id="core-form-field--readonly" />
</Canvas>

### Guidance

- The prop should be applied to the field, not the control it contains, for expected results.
- Set the field to read-only if you’re displaying values that are predefined and not editable, e.g., entry that’s populated and fixed by template selection.
- Adheres to WCAG AA text contrast for legibility; read-only field content is always relevant to the form, but cannot be changed.

## Field Validation

Form Fields can show validation states (warning, success, error) with the prop `validationStatus`.

<Canvas>
  <Story id="core-form-field--with-validation" />
</Canvas>

### Guidance

- The prop should be applied to the field, not the control it contains, for expected results.
- Use the error state to alert the user of a critical issue that’s related to the field entry. This issue, which may jeopardize completion of the task, usually requires action from the user to resolve the error.
- Display the warning state when you need to alert the user of a potential issue—that won’t prevent the user from continuing with the task, but may cause errors if it’s not addressed.

## Multiple controls

Form Fields can wrap two or more controls in a layout component to have multiple children.

<Canvas>
  <Story id="core-form-field--multi-child" />
</Canvas>

### Guidance

- Set `role="group"` or `as="fieldset"` on the layout component for accessibility. If using a fieldset, browser fieldset styling should be overriden.
- Set the `variant` prop to the same variant on each control.

## How to use

### When to use Form Field

- Use Form Field as a wrapper for editable components in a form layout—such as a simple form, filter panel or cash ticket.
- We highly recommend using the Form Field Label and Form Field Helper Text components within Form Field to provide your form elements with the descriptive label and validation feedback required to ensure accessibility compliance.
- Align the Form Field to the correct Salt layout grid for your density and viewport size. Set the width of the form control to the number of columns that best reflects the length of the control’s expected value. The form control width can be set independently of the Label and Helper Text if required.

# API

```
import { FormField } from "@salt-ds/core";
```

## Props

<ArgsTable of={FormField} />

## CSS Class

<CSSClassTable of={FormField} />

## Characteristics Used

<CharacteristicUsage of={FormField} />

## Accessibility

All keyboard interactions are supplied by the underlying wrapped components, rather than the Form Field component.

Form Field labels and helper text can be used to describe the field controls. Any custom `id` prop passed to the Form Field will be used in the nested Form Field Label as `label-${formId}`, and in the Form Field Helper Text label as `helperText-${formId}` for this purpose.

<HelpAndSupport />

import { MultilineInput, Link } from "@salt-ds/core";
import { Meta, Canvas, ArgsTable, Story } from "@storybook/addon-docs";
import {
  CSSClassTable,
  CharacteristicUsage,
} from "css-variable-docgen-components";
import HelpAndSupport from "docs/blocks/help-and-support.doc.mdx";

<Meta
  title="Documentation/Core/Multiline Input"
  component={MultilineInput}
  parameters={{
    viewMode: "docs",
  }}
/>

# Multiline Input

Multiline Input provides an editable text area in which users can enter multiple lines of text and numeric values.

<Canvas>
  <Story id="core-multiline-input--default" />
</Canvas>

## Examples

### Default

Multiline Input comprises value text and a focus ring. The component is initially empty and then, once it has focus, it accepts text across multipline lines.

<Canvas>
  <Story id="core-multiline-input--default" />
</Canvas>

### Controlled

You can control Multiline Input with the `value` and `onChange` props. Learn more about <Link href="https://react.dev/learn/sharing-state-between-components#controlled-and-uncontrolled-components">controlled vs. uncontrolled components</Link> in the official React docs.

<Canvas>
  <Story id="core-multiline-input--controlled" />
</Canvas>

### Variants

Multiline Input has two variants: primary (default) and secondary.

Tip: For recommendations on variant choice, see the <Link href="https://www.saltdesignsystem.com/salt/patterns/forms">Forms pattern</Link>.

<Canvas>
  <Story id="core-multiline-input--variants" />
</Canvas>

## Number of Rows

Multiline Input shows three rows by default. This can be adjusted by setting the `rows` prop. This example demonstrates a Multiline Input with four rows.

Tip: Set the number of rows that you think best reflects the amount of content that your user will input in the context that your Multiline Input is being displayed.

<Canvas>
  <Story id="core-multiline-input--number-of-rows" />
</Canvas>

## Bordered

To style Multiline Input with a full border, set the `bordered` prop to `true`.

<Canvas>
  <Story id="core-multiline-input--bordered" />
</Canvas>

- We recommend this styling when the field uses the same fill colour as the background (i.e., a primary fill colour on a primary background).

### Disabled

You can set Multiline Input to a disabled state, with no resultant action when the user interacts with it.

<Canvas>
  <Story id="core-multiline-input--disabled" />
</Canvas>

- When setting Multiline Input to disabled state, ensure to also disable any nested interactive adornments, such as buttons.

### Read-only

You can set Multiline Input to a read-only state. The value text can’t be edited in this state, but it can be highlighted and copied.
**Note:** Read-only fields are not focusable since they are treated as a static representation rather than a form control.

<Canvas>
  <Story id="core-multiline-input--readonly" />
</Canvas>

- Use the read-only state when the value is necessary for the users flow or current task but cannot be edited, for example, because of user permissions.
- When using read-only state, ensure to also disable any nested interactive adornments, such as buttons.

### Validation

Use the `validationStatus` prop to show validation states (error, warning, or success) in a Multiline Input.

<Canvas>
  <Story id="core-multiline-input--validation-states" />
</Canvas>

- Use the error state to alert the user of a critical issue that’s related to the input. Issues highlighted by an error state may jeopardize completion of the task and usually require action from the user to resolve the error.
- Display the warning state to alert the user of a potential issue that won’t prevent the user from continuing with the task, but may cause errors if it’s not addressed.

### Placeholder

You can use a placeholder to prompt user input if no default value is provided.

<Canvas>
  <Story id="core-multiline-input--placeholder" />
</Canvas>

- Placeholder text should never be used to provide the user with contextual help since it will be removed when the user starts typing and does not meet minimum contrast requirements. Doing so is a WCAG failure. Instead, use Helper Text beneath the field to provide instructions or directions which are necessary to complete the field, and reserve the Placeholder Text to support the help message, or provide an example of the input. More information can be found [here](https://www.w3.org/WAI/tutorials/forms/instructions/)

### Adornments

You can use custom adornments at the beginning or end of the Multiline Input field using the `startAdornment` and `endAdornment` props respectively.

<Canvas>
  <Story id="core-multiline-input--with-adornments" />
</Canvas>

## Spellcheck

Turn on automatic spellchecking by using `inputProps`.

<Canvas>
  <Story id="core-multiline-input--spellcheck" />
</Canvas>

### Character Count

You can add a character count as a label using ‘endAdornment’ props. This example demonstrates the expected behaviour when the count is exceeded, with the field dynamically displaying an error state and the count continuing to display the number of characters over the limit.

<Canvas>
  <Story id="core-multiline-input--character-count" />
</Canvas>

- If the user goes over the character count limit, display an error state and change the Label to `primary` variant with strong text.

## How to use

### When to use Multiline Input

A Multiline Input is recommended when a user is asked a subjective question and the length of their answer is unknown. In this case, give them plenty of space in the field to answer their question and review their answer. Set the height accordingly if you can take an educated guess at the possible length of their answer–see the Number of Rows example.

## When not to use Multiline Input

Input field width and height should always reflect the amount of content expected in the field. If the content is unlikely to exceed a single line, always use a regular [Input](?path=/docs/documentation-core-input--docs) component, rather than a Multiline Input.

## API

```
import { MultilineInput } from "@salt-ds/core";
```

### Props

<ArgsTable of={MultilineInput} />

### CSS Class

<CSSClassTable of={MultilineInput} />

### Characteristics Used

<CharacteristicUsage of={MultilineInput} />

### Accessibility

To be considered accessible within a form, the Multiline Input _must_ be wrapped in a [Form Field](?path=/docs/documentation-core-form-field--docs) component, which will provide the field with a visible label, help text and a status message for validation feedback.

<HelpAndSupport />

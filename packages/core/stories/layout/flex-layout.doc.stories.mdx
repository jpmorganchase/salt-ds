import { Meta, Story, Canvas, ArgsTable } from "@storybook/addon-docs";
import { ComponentAnatomy } from "docs/components/ComponentAnatomy";
import { FlexLayout, FlexItem } from "@jpmorganchase/uitk-core";
import {
  CSSClassTable,
  CSSVariableTable,
} from "css-variable-docgen-components";
import { DefaultFlexLayout } from "./flex-layout.stories";
import HelpAndSupport from "../help-and-support.doc.mdx";

<Meta
  title="Documentation/Core/Layout/FlexLayout"
  component={FlexLayout}
  subcomponents={{ FlexItem }}
  parameters={{
    viewMode: "docs",
  }}
/>

# Flex layout

Flex layout dictates a horizontal or vertical order and direction for UI elements.
The height is driven by the child elements, and there are visual separators that can be turned on/off (default) between items.

It can be used for cases in which the direction needs complex customization that can't be achieved by stack or flow layouts.
For example, in layouts where the direction needs to change depending on the viewport.

For layouts where you need to control the two dimensions, see [Grid layout](?path=/docs/documentation-core-layout-gridlayout--page).

<Canvas>
  <Story id="core-layout-flexlayout--default-flex-layout" />
</Canvas>

## Use Flex layout when...

You want a layout that flows in a single dimension, where the dimension changes depending on something external like viewport size.

### Don't use Flex layout when...

You want your layout to have a constant direction. In this case we recommend you having a look at [Stack layout](?path=/docs/documentation-core-layout-stacklayout--page) or [Flow layout](?path=/docs/documentation-core-layout-flowlayout--page).

### Examples

#### Flex Item inside default flex layout

A flex item allows more complex controls to the default behaviour of a flex child, like defining the priority with which an element grows/shrink and its alignment.

<Canvas>
  <Story id="core-layout-flexlayout-flexitem--flex-item-wrapper" />
</Canvas>

#### Flex layout with separators

Flex layout allows for separators between items that will by default display centered `separators={true}` but can be customized to sit on the left or right of a children.
The separators span across the width of the layout component if the direction is row and the height if the direction is columns.
The Flex layout gap will apply to both sides of the separator line.

<Canvas>
  <Story id="core-layout-flexlayout--flex-layout-with-separators" />
</Canvas>

#### Responsive

The flex layout supports the use of responsive props, so you can define different behaviours based on viewport size.
You can use the default breakpoints or pass in your own.

<Canvas>
  <Story id="core-layout-flexlayout--flex-layout-using-responsive-props" />
</Canvas>

#### Simple usage

The simple usage example shows a group of elements inside a flex container with `wrap`.

<Canvas>
  <Story id="core-layout-flexlayout--flex-layout-simple-usage" />
</Canvas>

#### Composite usage

The composite usage example shows a collection of contact details cards using `FlexLayout`.

<Canvas>
  <Story id="core-layout-flexlayout--flex-layout-composite" />
</Canvas>

## Configuring Flex layout

### API

```
import { FlexLayout, FlexItem } from "@jpmorganchase/uitk-core";
```

### Props

**ResponsiveProp** refers to a prop than take either multiple values (one per breakpoint) or a single value that would take effect across all different screen sizes.
For the following example, we can think about a layout that will change direction from rows to columns as the breakpoints change.

```
direction={{ xs: "row", sm: "column", lg: "row", md: "column", xl: "row" }}
```

<ArgsTable of={FlexLayout} />

## Related components

The flex layout is used in the following components:

- [Split layout](?path=/docs/documentation-core-layout-splitlayout--page)
- [Stack layout](?path=/docs/documentation-core-layout-stacklayout--page)
- [Flow layout](?path=/docs/documentation-core-layout-flowlayout--page)
- [Parent Child layout](?path=/docs/documentation-core-layout-parentchildlayout--page)

## Anatomy

<Canvas>
  <ComponentAnatomy showControls={false}>
    <FlexLayout style={{ border: "dashed 1px black", padding: "1rem" }}>
      <FlexItem style={{ border: "dashed 1px black", padding: "1rem" }} />
    </FlexLayout>
  </ComponentAnatomy>
</Canvas>

### Classes

#### Layout

<CSSClassTable of={FlexLayout} />

#### Item

<CSSClassTable of={FlexItem} />

<HelpAndSupport />
